完善之前由 Spring 和 Spring MVC 完成的 CRM 项目: 添加完整的权限管理功能
2017.01.02
1. 底层数据访问由 JdbcTemplate 改为 Hibernate
2. 使用 hibernate 重写 po 类
    2.1 角色与用户之间是多对多关系
        维护关系: 由用户 User 维护
    2.2 角色与资源之间是多对多关系
        维护关系; 由角色 Role 维护
    2.3 资源表中 parent 自关联
2017.01.03
3. 完成登陆页面和登陆逻辑
    3.1 使用过滤器检查是否登陆
    3.2 增加安全退出功能
4. 数据库改为 MySql, 方便部署项目
5. 为用户分配角色
    5.1 同步到数据库中的 crm_user_role 表
    5.2 新页面上进行角色分配
6. 为角色分配资源
    6.1 使用模态框结合 ztree 插件进行资源分配
    6.2 数据可以同步到 crm_role_resource 表
7. 检查用户操作: 控制权限
    7.1 需要控制权限的方法上加上自定义注解
    7.2 拦截器中检查当前角色是否有访问该方法的权限
        7.2.1 从数据库中查询出当前登陆用户所有角色, 以及各个角色的所有权限列表
        7.2.2 获取当前访问访问方法上的权限注解
        7.2.3 从列表中查询, 如果有则放行, 否则就抛出异常
    7.3 获取抛出的权限访问异常, 然后返回到指定的权限异常处理页面
    注意: 管理权限如 SYS_MANAGE 对应菜单, 而功能权限如 SYS_USER_VIEW 对应方法; 而功能权限属于管理权限的子权限, 有子权限一定有
    父权限, 但是反过来不一定.
8. 当删除角色时, 如果有用户依赖于该角色, 直接删除角色会出错, 需要先断开联系;
    8.1 删除角色同样有该问题存在
    8.2 删除方法需要重写 hashcode() 和 equals() 方法
9. 修改项目使其与文档匹配
10. 增加部门管理
11. 增加部门表, Dept 类
    11.1 部门与用户之间是一对多的关系, 部门为一, 用户为多
    11.2 由用户维护关系

其他: 可选
1. 菜单页面, 点击菜单管理后, 打开菜单列表

2. 忘记密码, 通过邮件找回


细节部分:
1. 优化命名

bug:
1. 当前用户将自己从用户表中删除, 会报错;
    控制权限, 只有管理员才有删除用户权限; 且只有管理员才能控制权限
    管理员删除自己?
    删除用户的方法中进行判断, 当前删除用户是否和当前登陆用户 id 相同, 相同则不允许操作;
